
<!DOCTYPE html>
<html lang="en">
<!--This version conditionally hides Heineken score details until unlocked.-->
    <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no" />
    <title>Womiay</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
    tailwind.config = {
      theme: {
        extend: {
          keyframes: {
            'twinkle': {
              '0%, 100%': { opacity: '0.8' },
              '50%': { opacity: '1' },
            }
          },
          animation: {
            'twinkle': 'twinkle 2s ease-in-out infinite',
          }
        }
      }
    }
    </script>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
        body, html {
            height: 100%;
            margin: 0;
            padding: 0;
            overflow: hidden;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            overscroll-behavior-y: contain;
            touch-action: manipulation;
        }
        #root {
            height: 100%;
            display: flex;
            flex-direction: column;
        }
        .font-brand {
            font-family: 'Brush Script MT', 'cursive', sans-serif;
        }
        .game-container {
            flex-grow: 1;
            position: relative;
            overflow: hidden;
            cursor: none;
        }
    </style>
</head>
<body class="bg-gray-900">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useCallback, useRef } = React;

        // --- GAME CONSTANTS ---
        const CATCHER_WIDTH_PERCENT = 28;
        const CATCHER_HEIGHT_PERCENT = 14;
        const SPAWNER_WIDTH_PERCENT = 25;
        const SPAWNER_HEIGHT_PERCENT = 12;
        const GAME_SPEED_INCREMENT = 0.2;
        const DRINK_SPAWN_INTERVAL_MS = 2000;
        const CATCHER_BOTTOM_OFFSET_PERCENT = 5;
        const HEINEKEN_UNLOCK_SCORE = 24;

        const DRINK_TYPES = {
            regular: {
                src: "https://lucianlipsgaming.owenelwin.com/womiay/onePiton.png",
                size: 150,
                points: 1,
                glow: false,
            },
            bonus: {
                src: "https://lucianlipsgaming.owenelwin.com/womiay/twoPitons.png",
                size: 200,
                points: 2,
                glow: true,
            },
            heineken: {
                src: "https://lucianlipsgaming.owenelwin.com/womiay/heineken.png",
                size: 200,
                points: 1,
                glow: true,
            },
        };

        // --- COMPONENTS ---

        const Header = () => (
            <header className="bg-gray-900 text-white text-center p-3 z-10 select-none shadow-lg">
                <h1 className="text-4xl md:text-5xl font-extrabold tracking-widest text-transparent bg-clip-text bg-gradient-to-r from-purple-400 to-pink-600 drop-shadow-lg font-brand">Lucian Lips Gaming</h1>
            </header>
        );

        const Hud = ({ score, speed }) => (
            <div className="absolute top-0 left-0 right-0 p-2 text-white text-lg flex justify-between px-4 z-10 select-none bg-black/20">
                <span>Beers: {score}</span>
                <span>Speed: {speed.toFixed(1)}x</span>
            </div>
        );

        const Spawner = ({ position }) => (
            <img
                src="https://lucianlipsgaming.owenelwin.com/womiay/theBar.png"
                alt="Bar Spawner"
                style={{
                    left: `${position}%`,
                    top: `0%`,
                    width: `${SPAWNER_WIDTH_PERCENT}%`,
                    height: `${SPAWNER_HEIGHT_PERCENT}%`,
                }}
                className="absolute transform -translate-x-1/2 object-contain transition-all duration-500 ease-in-out"
            />
        );

        const Drink = ({ drink }) => {
            const type = DRINK_TYPES[drink.type];
            return (
                <div
                    style={{
                        left: `${drink.x}%`,
                        top: `${drink.y}%`,
                        width: `${type.size}px`,
                        height: `${type.size}px`,
                    }}
                    className={`absolute transform -translate-x-1/2 -translate-y-1/2`}
                >
                    <img
                        src={type.src}
                        alt={drink.type}
                        className="w-full h-full object-contain animate-twinkle"
                        style={{
                             filter: type.glow ? `drop-shadow(0 0 10px #d8b4fe)` : 'none',
                        }}
                    />
                </div>
            );
        };

        const Catcher = ({ position }) => (
            <img
                src="https://lucianlipsgaming.owenelwin.com/womiay/lips.png"
                alt="Catcher Lips"
                style={{
                    left: `${position}%`,
                    bottom: `${CATCHER_BOTTOM_OFFSET_PERCENT}%`,
                    width: `${CATCHER_WIDTH_PERCENT}%`,
                    height: `${CATCHER_HEIGHT_PERCENT}%`
                }}
                className="absolute transform -translate-x-1/2 object-contain"
                aria-label="Catcher"
            />
        );

        const GameOverScreen = ({ pitonScore, heinekenScore, onRestart, heinekenUnlocked }) => {
            const [copied, setCopied] = useState(false);
            const gameUrl = "https://lucianlipsgaming.owenelwin.com/womiay";

            const handleShare = async (e) => {
                e.stopPropagation(); 
                
                const pitonText = `${pitonScore} piton${pitonScore !== 1 ? 's' : ''}`;
                let shareText;

                if (heinekenUnlocked) {
                    const heinekenText = `${heinekenScore} heineken${heinekenScore !== 1 ? 's' : ''}`;
                    shareText = `I fired ${pitonText} and ${heinekenText}! try to beat my score!`;
                } else {
                    shareText = `I fired ${pitonText}! try to beat my score!`;
                }

                if (navigator.share) {
                    try { await navigator.share({ title: 'Womiay', text: shareText, url: gameUrl }); } catch (err) { console.error("Share failed:", err); }
                } else {
                    navigator.clipboard.writeText(`${shareText} ${gameUrl}`).then(() => {
                        setCopied(true);
                        setTimeout(() => setCopied(false), 2000);
                    });
                }
            };
            
            return (
                <div className="absolute inset-0 bg-black bg-opacity-70 flex flex-col justify-center items-center text-white z-20">
                    <h2 className="text-5xl font-extrabold mb-4">Game Over</h2>
                    <div className="text-center text-2xl mb-8">
                        <p>Pitons Fired: {pitonScore}</p>
                        {heinekenUnlocked && <p>Heinekens Fired: {heinekenScore}</p>}
                    </div>
                    <div className="flex flex-col sm:flex-row gap-4">
                        <button onClick={onRestart} className="px-8 py-4 bg-purple-600 hover:bg-purple-700 rounded-lg text-xl font-bold transition-transform transform hover:scale-105">
                            Play Again
                        </button>
                        <button onClick={handleShare} className="px-8 py-4 bg-teal-500 hover:bg-teal-600 rounded-lg text-xl font-bold transition-transform transform hover:scale-105">
                            {copied ? 'Link Copied!' : 'Share Score'}
                        </button>
                    </div>
                </div>
            );
        };

        const StartScreen = ({ onStart }) => (
             <div className="absolute inset-0 bg-gradient-to-b from-indigo-900 to-indigo-500 flex flex-col justify-center items-center text-white z-20 cursor-pointer" onClick={onStart}>
                <h2 className="text-5xl font-extrabold mb-4 animate-twinkle">Start Game</h2>
                <p className="text-xl mt-4">Click or Tap to Begin</p>
             </div>
        );

        const UnlockScreen = ({ onResume }) => (
            <div className="absolute inset-0 bg-black bg-opacity-80 flex flex-col justify-center items-center text-white z-30 cursor-pointer" onClick={onResume}>
                <h2 className="text-5xl font-extrabold mb-4 text-green-400 animate-twinkle">Heineken Unlocked!</h2>
                <p className="text-xl mt-4">A new drink has been added.</p>
                <button className="mt-8 px-8 py-4 bg-green-600 hover:bg-green-700 rounded-lg text-xl font-bold transition-transform transform hover:scale-105">
                    Continue
                </button>
             </div>
        );

        // --- MAIN APP ---
        const App = () => {
            const [gameState, setGameState] = useState('idle'); // 'idle', 'playing', 'paused', 'gameOver'
            const [heinekenUnlocked, setHeinekenUnlocked] = useState(false);
            const [catcherPosition, setCatcherPosition] = useState(50);
            const [drinks, setDrinks] = useState([]);
            const [pitonScore, setPitonScore] = useState(0);
            const [heinekenScore, setHeinekenScore] = useState(0);
            const [speed, setSpeed] = useState(1.0);
            const [spawnerPosition, setSpawnerPosition] = useState(50);
            
            const gameContainerRef = useRef(null);
            const gameLoopRef = useRef(null);
            const drinkTimeoutRef = useRef(null);
            const bonusSoundRef = useRef(null);
            const backgroundMusicRef = useRef(null);
            
            const totalScore = pitonScore + heinekenScore;

            const startGame = () => {
                if (!backgroundMusicRef.current) {
                    backgroundMusicRef.current = new Audio("https://lucianlipsgaming.owenelwin.com/womiay/natasha.mp3");
                    backgroundMusicRef.current.loop = true;
                }
                if (!bonusSoundRef.current) {
                    bonusSoundRef.current = new Audio("https://lucianlipsgaming.owenelwin.com/womiay/twoForFive.mp3");
                }
                backgroundMusicRef.current.play().catch(e => console.error("Music failed to play:", e));

                setDrinks([]);
                setPitonScore(0);
                setHeinekenScore(0);
                setSpeed(1.0);
                setCatcherPosition(50);
                setSpawnerPosition(50);
                setHeinekenUnlocked(false);
                setGameState('playing');
            };
            
            const resumeGame = () => setGameState('playing');

            const handleGameOver = useCallback(() => {
                if(backgroundMusicRef.current) backgroundMusicRef.current.pause();
                setGameState('gameOver');
            }, []);
            
            const restartGame = useCallback(() => {
                 if(backgroundMusicRef.current) backgroundMusicRef.current.currentTime = 0;
                 setGameState('idle');
            }, []);

            const spawnDrink = useCallback(() => {
                const availableTypes = ['regular', 'bonus'];
                if(heinekenUnlocked) {
                    availableTypes.push('heineken');
                }

                const rand = Math.random();
                let drinkType;

                if(heinekenUnlocked) {
                    if (rand < 0.15) drinkType = 'heineken';
                    else if (rand < 0.35) drinkType = 'bonus';
                    else drinkType = 'regular';
                } else {
                    if (rand < 0.15) drinkType = 'bonus';
                    else drinkType = 'regular';
                }

                const newX = 5 + Math.random() * 90;
                setSpawnerPosition(newX);

                setTimeout(() => {
                    if (gameState !== 'playing') return;
                    setDrinks(prev => [...prev, { id: Date.now(), x: newX, y: (SPAWNER_HEIGHT_PERCENT / 2), type: drinkType }]);
                }, 500);
                
            }, [gameState, heinekenUnlocked]);
            
            // Score check for unlock
            useEffect(() => {
                if (totalScore >= HEINEKEN_UNLOCK_SCORE && !heinekenUnlocked) {
                    setHeinekenUnlocked(true);
                    setGameState('paused');
                }
            }, [totalScore, heinekenUnlocked]);

            // Game Loop
            useEffect(() => {
                if (gameState !== 'playing') {
                    clearTimeout(drinkTimeoutRef.current);
                    cancelAnimationFrame(gameLoopRef.current);
                    return;
                };

                const moveDrinks = () => {
                    let heinekenPointsThisFrame = 0;
                    let pitonPointsThisFrame = 0;
                    let itemsCaughtThisFrame = 0;

                    let gameOverTriggered = false;
                    const remainingDrinks = [];

                    for (const drink of drinks) {
                        const newY = drink.y + 0.2 * speed;

                        if (newY > 105) {
                            gameOverTriggered = true;
                            break; 
                        }

                        const catcherTopY = 100 - CATCHER_BOTTOM_OFFSET_PERCENT - CATCHER_HEIGHT_PERCENT;
                        const catcherBottomY = 100 - CATCHER_BOTTOM_OFFSET_PERCENT;
                        const catcherHalfWidth = CATCHER_WIDTH_PERCENT / 2;

                        const isCaught = newY > catcherTopY && newY < catcherBottomY &&
                                       drink.x > catcherPosition - catcherHalfWidth &&
                                       drink.x < catcherPosition + catcherHalfWidth;

                        if (isCaught) {
                            const drinkType = DRINK_TYPES[drink.type];
                            itemsCaughtThisFrame++;

                            if (drink.type === 'heineken') {
                                heinekenPointsThisFrame += drinkType.points;
                            } else {
                                pitonPointsThisFrame += drinkType.points;
                                if (drink.type === 'bonus') {
                                    if(bonusSoundRef.current) {
                                      bonusSoundRef.current.currentTime = 0;
                                      bonusSoundRef.current.play();
                                    }
                                }
                            }
                        } else {
                            remainingDrinks.push({ ...drink, y: newY });
                        }
                    }

                    if (gameOverTriggered) {
                        handleGameOver();
                        return;
                    }

                    setDrinks(remainingDrinks);
                    
                    if (itemsCaughtThisFrame > 0) {
                        if (pitonPointsThisFrame > 0) setPitonScore(s => s + pitonPointsThisFrame);
                        if (heinekenPointsThisFrame > 0) setHeinekenScore(s => s + heinekenPointsThisFrame);
                        setSpeed(s => s + (GAME_SPEED_INCREMENT * itemsCaughtThisFrame));
                    }
                    
                    gameLoopRef.current = requestAnimationFrame(moveDrinks);
                };

                gameLoopRef.current = requestAnimationFrame(moveDrinks);
                return () => cancelAnimationFrame(gameLoopRef.current);
            }, [gameState, drinks, speed, catcherPosition, handleGameOver]);

            // Drink Spawner Interval
            useEffect(() => {
                if (gameState !== 'playing') return;
                const spawnInterval = DRINK_SPAWN_INTERVAL_MS / speed;
                drinkTimeoutRef.current = setInterval(spawnDrink, spawnInterval);
                return () => clearInterval(drinkTimeoutRef.current);
            }, [gameState, speed, spawnDrink]);

            // Controls
            const handleMouseMove = useCallback((e) => {
                if (gameState !== 'playing' || !gameContainerRef.current) return;
                const rect = gameContainerRef.current.getBoundingClientRect();
                const newX = ((e.clientX - rect.left) / rect.width) * 100;
                const halfWidth = CATCHER_WIDTH_PERCENT / 2;
                setCatcherPosition(Math.max(halfWidth, Math.min(100 - halfWidth, newX)));
            }, [gameState]);
            
            const handleTouchMove = useCallback((e) => {
                 if (gameState !== 'playing' || !gameContainerRef.current) return;
                 e.preventDefault();
                 const rect = gameContainerRef.current.getBoundingClientRect();
                 const newX = ((e.touches[0].clientX - rect.left) / rect.width) * 100;
                 const halfWidth = CATCHER_WIDTH_PERCENT / 2;
                 setCatcherPosition(Math.max(halfWidth, Math.min(100 - halfWidth, newX)));
            }, [gameState]);

            const handleKeyDown = useCallback((e) => {
                if(gameState === 'idle') { startGame(); return; }
                if(gameState === 'paused') { resumeGame(); return; }
                if (gameState !== 'playing') return;
                
                const moveAmount = 5;
                if (e.key === 'ArrowLeft') setCatcherPosition(pos => Math.max(CATCHER_WIDTH_PERCENT / 2, pos - moveAmount));
                else if (e.key === 'ArrowRight') setCatcherPosition(pos => Math.min(100 - CATCHER_WIDTH_PERCENT / 2, pos + moveAmount));
            }, [gameState, startGame, resumeGame]);
            
            useEffect(() => {
                window.addEventListener('keydown', handleKeyDown);
                return () => window.removeEventListener('keydown', handleKeyDown);
            }, [handleKeyDown]);

            return (
                <>
                    <Header />
                    <main 
                        ref={gameContainerRef} 
                        className="game-container bg-gradient-to-b from-indigo-900 to-indigo-500"
                        onMouseMove={handleMouseMove}
                        onTouchMove={handleTouchMove}
                        onTouchStart={e => e.preventDefault()}
                    >
                       {gameState === 'idle' && <StartScreen onStart={startGame} />}
                       {gameState === 'paused' && <UnlockScreen onResume={resumeGame} />}
                       
                       {(gameState === 'playing' || gameState === 'paused') && (
                           <>
                                <Hud score={totalScore} speed={speed} />
                                <Spawner position={spawnerPosition} />
                                {drinks.map(drink => <Drink key={drink.id} drink={drink} />)}
                                <Catcher position={catcherPosition} />
                           </>
                       )}
                       {gameState === 'gameOver' && <GameOverScreen pitonScore={pitonScore} heinekenScore={heinekenScore} onRestart={restartGame} heinekenUnlocked={heinekenUnlocked} />}
                    </main>
                </>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
