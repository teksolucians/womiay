<!--This version has natasha as background music as well as the twoForFive when collecting two Pitons-->
<!DOCTYPE html> 
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>WOMIAY</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
    tailwind.config = {
      theme: {
        extend: {
          keyframes: {
            'bonus-glow': {
              '0%, 100%': { filter: 'drop-shadow(0 0 4px currentColor)' },
              '50%': { filter: 'drop-shadow(0 0 8px currentColor)' }
            },
            'twinkle': {
              '0%, 100%': { opacity: '0.7' },
              '50%': { opacity: '1' },
            }
          },
          animation: {
            'bonus-glow': 'bonus-glow 1.5s ease-in-out infinite',
            'twinkle': 'twinkle 2s ease-in-out infinite',
          }
        }
      }
    }
    </script>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            overscroll-behavior-y: contain;
            touch-action: manipulation;
        }
        .font-brand {
            font-family: 'Brush Script MT', 'cursive', sans-serif;
        }
    </style>
</head>
<body class="bg-gray-900 overflow-hidden">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useCallback, useRef } = React;

        // --- GAME CONSTANTS ---
        const CATCHER_WIDTH_VW = 15;
        const CATCHER_HEIGHT_VH = 10;
        const DRINK_SIZE_PIXELS = 200;
        const SPAWNER_WIDTH_VW = 30;
        const SPAWNER_HEIGHT_VH = 15;
        const GAME_SPEED_INCREMENT = 0.2;
        const DRINK_SPAWN_INTERVAL_MS = 2000;
        const BONUS_DRINK_CHANCE = 0.15; // 15% chance
        const CATCHER_BOTTOM_OFFSET_VH = 5;

        // --- COMPONENTS ---

        const Spawner = ({ position }) => (
            <img
                src="https://lucianlipsgaming.owenelwin.com/womiay/theBar.png"
                alt="Bar Spawner"
                style={{
                    left: `${position}%`,
                    width: `${SPAWNER_WIDTH_VW}vw`,
                    height: `${SPAWNER_HEIGHT_VH}vh`,
                }}
                className="absolute top-0 transform -translate-x-1/2 object-contain transition-all duration-500 ease-in-out"
            />
        );

        const Drink = ({ drink }) => {
            const isBonus = drink.bonus;
            const size = isBonus ? DRINK_SIZE_PIXELS : DRINK_SIZE_PIXELS - 50;

            return (
                <div
                    style={{
                        left: `${drink.x}%`,
                        top: `${drink.y}%`,
                        width: `${size}px`,
                        height: `${size}px`,
                    }}
                    className={`absolute transform -translate-x-1/2 -translate-y-1/2`}
                >
                    <img
                        src={isBonus ? "https://lucianlipsgaming.owenelwin.com/womiay/twoPitons.png" : "https://lucianlipsgaming.owenelwin.com/womiay/onePiton.png"}
                        alt={isBonus ? "Bonus Drink" : "Drink"}
                        className="w-full h-full object-contain animate-twinkle"
                        style={{
                             filter: isBonus ? `drop-shadow(0 0 10px #d8b4fe)` : 'none',
                        }}
                    />
                </div>
            );
        };

        const Catcher = ({ position }) => (
            <img
                src="https://lucianlipsgaming.owenelwin.com/womiay/lips.png"
                alt="Catcher Lips"
                style={{
                    left: `${position}%`,
                    bottom: `${CATCHER_BOTTOM_OFFSET_VH}vh`,
                    width: `${CATCHER_WIDTH_VW}vw`,
                    height: `${CATCHER_HEIGHT_VH}vh`
                }}
                className="absolute transform -translate-x-1/2 object-contain"
                aria-label="Catcher"
            />
        );

        const Hud = ({ score, speed }) => (
            <div className="absolute top-0 left-0 right-0 p-4 text-white text-center z-10 select-none">
                <h1 className="text-4xl md:text-5xl font-extrabold tracking-widest text-transparent bg-clip-text bg-gradient-to-r from-purple-400 to-pink-600 drop-shadow-lg font-brand">Lucian Lips Gaming</h1>
                <div className="flex justify-between text-2xl font-bold mt-2 px-4">
                    <span>Score: {score}</span>
                    <span>Speed: {speed.toFixed(1)}x</span>
                </div>
            </div>
        );

        const GameOverScreen = ({ score, onRestart }) => (
            <div className="absolute inset-0 bg-black bg-opacity-70 flex flex-col justify-center items-center text-white z-20">
                <h2 className="text-5xl font-extrabold mb-4">Game Over</h2>
                <p className="text-2xl mb-8">Final Score: {score}</p>
                <button
                    onClick={onRestart}
                    className="px-8 py-4 bg-purple-600 hover:bg-purple-700 rounded-lg text-xl font-bold transition-transform transform hover:scale-105"
                >
                    Restart Game
                </button>
            </div>
        );
        
        const InitialPrompt = () => (
            <div className="absolute bottom-1/4 left-1/2 -translate-x-1/2 text-white bg-black/50 p-4 rounded-lg animate-pulse text-center text-lg">
                Tap or use Arrow Keys to Start & Move
            </div>
        );

        // --- MAIN APP ---
        const App = () => {
            const [catcherPosition, setCatcherPosition] = useState(50);
            const [drinks, setDrinks] = useState([]);
            const [score, setScore] = useState(0);
            const [speed, setSpeed] = useState(1.0);
            const [gameOver, setGameOver] = useState(false);
            const [spawnerPosition, setSpawnerPosition] = useState(50);
            const [gameStarted, setGameStarted] = useState(false);

            const gameContainerRef = useRef(null);
            const gameLoopRef = useRef(null);
            const drinkTimeoutRef = useRef(null);
            const bonusSoundRef = useRef(new Audio("https://lucianlipsgaming.owenelwin.com/womiay/twoForFive.mp3"));
            const backgroundMusicRef = useRef(new Audio("https://lucianlipsgaming.owenelwin.com/womiay/natasha.mp3"));

            const startGame = useCallback(() => {
                if (gameStarted) return;
                setGameStarted(true);
                const music = backgroundMusicRef.current;
                music.loop = true;
                music.play().catch(e => console.error("Background music failed to play:", e));
            }, [gameStarted]);

            const resetGame = useCallback(() => {
                setGameOver(false);
                setCatcherPosition(50);
                setDrinks([]);
                setScore(0);
                setSpeed(1.0);
                setSpawnerPosition(50);
                setGameStarted(false);
                
                const music = backgroundMusicRef.current;
                music.pause();
                music.currentTime = 0;

                clearTimeout(drinkTimeoutRef.current);
                cancelAnimationFrame(gameLoopRef.current);
            }, []);

            const handleGameOver = useCallback(() => {
                setGameOver(true);
                backgroundMusicRef.current.pause();
                clearTimeout(drinkTimeoutRef.current);
                cancelAnimationFrame(gameLoopRef.current);
            }, []);

            const spawnDrink = useCallback(() => {
                const newX = 5 + Math.random() * 90; // 5% margin
                const isBonus = Math.random() < BONUS_DRINK_CHANCE;
                
                setSpawnerPosition(newX);

                setTimeout(() => {
                    if (gameOver) return;
                    const newDrink = {
                        id: Date.now(),
                        x: newX,
                        y: (SPAWNER_HEIGHT_VH / window.innerHeight) * 100, // Start from the spawner
                        bonus: isBonus
                    };
                    setDrinks(prev => [...prev, newDrink]);
                }, 500); // Wait for spawner to move
                
            }, [gameOver]);

            // Game Loop
            useEffect(() => {
                if (!gameStarted || gameOver) {
                    return;
                }

                const moveDrinks = () => {
                    setDrinks(prevDrinks => {
                        const newDrinks = [];
                        let scoredThisFrame = false;
                        for (const drink of prevDrinks) {
                            const newY = drink.y + 0.2 * speed;
                            if (newY > 105) {
                                handleGameOver();
                                return [];
                            }

                            const catcherY = 100 - CATCHER_BOTTOM_OFFSET_VH - (CATCHER_HEIGHT_VH / 2);
                            const catcherHalfWidth = CATCHER_WIDTH_VW / 2;

                            if (newY > catcherY && newY < catcherY + CATCHER_HEIGHT_VH &&
                                drink.x > catcherPosition - catcherHalfWidth &&
                                drink.x < catcherPosition + catcherHalfWidth)
                            {
                                if (drink.bonus) {
                                    const sound = bonusSoundRef.current;
                                    sound.currentTime = 0;
                                    sound.play().catch(e => console.error("Bonus sound failed to play:", e));
                                    setScore(s => s + 5);
                                } else {
                                    setScore(s => s + 1);
                                }
                                scoredThisFrame = true;
                            } else {
                                newDrinks.push({ ...drink, y: newY });
                            }
                        }
                        if(scoredThisFrame) setSpeed(s => s + GAME_SPEED_INCREMENT);
                        return newDrinks;
                    });
                    gameLoopRef.current = requestAnimationFrame(moveDrinks);
                };

                gameLoopRef.current = requestAnimationFrame(moveDrinks);

                return () => cancelAnimationFrame(gameLoopRef.current);
            }, [speed, gameOver, catcherPosition, gameStarted, handleGameOver]);

            // Drink Spawner Interval
            useEffect(() => {
                if (!gameStarted || gameOver) {
                    clearTimeout(drinkTimeoutRef.current);
                    return;
                }
                const spawnInterval = DRINK_SPAWN_INTERVAL_MS / speed;
                drinkTimeoutRef.current = setInterval(spawnDrink, spawnInterval);
                return () => clearInterval(drinkTimeoutRef.current);
            }, [speed, gameOver, spawnDrink, gameStarted]);

            // Controls
            const handleMouseMove = useCallback((e) => {
                startGame();
                if (gameOver || !gameContainerRef.current) return;
                const rect = gameContainerRef.current.getBoundingClientRect();
                const newX = ((e.clientX - rect.left) / rect.width) * 100;
                setCatcherPosition(Math.max(CATCHER_WIDTH_VW / 2, Math.min(100 - CATCHER_WIDTH_VW / 2, newX)));
            }, [gameOver, startGame]);
            
            const handleTouchStart = useCallback((e) => {
                startGame();
                if (gameOver) return;
                e.preventDefault();
                const touchX = e.touches[0].clientX;
                const halfScreenWidth = window.innerWidth / 2;
                const moveAmount = 15;
                
                if (touchX < halfScreenWidth) {
                    setCatcherPosition(pos => Math.max(CATCHER_WIDTH_VW / 2, pos - moveAmount));
                } else {
                    setCatcherPosition(pos => Math.min(100 - CATCHER_WIDTH_VW / 2, pos + moveAmount));
                }
            }, [gameOver, startGame]);
            
            const handleKeyDown = useCallback((e) => {
                startGame();
                if (gameOver) return;
                const moveAmount = 5;
                if (e.key === 'ArrowLeft') {
                    setCatcherPosition(pos => Math.max(CATCHER_WIDTH_VW / 2, pos - moveAmount));
                } else if (e.key === 'ArrowRight') {
                    setCatcherPosition(pos => Math.min(100 - CATCHER_WIDTH_VW / 2, pos + moveAmount));
                }
            }, [gameOver, startGame]);

            useEffect(() => {
                window.addEventListener('keydown', handleKeyDown);
                return () => window.removeEventListener('keydown', handleKeyDown);
            }, [handleKeyDown]);
            
            return (
                <div
                    ref={gameContainerRef}
                    className="relative w-screen h-screen bg-gradient-to-b from-indigo-900 to-indigo-500 cursor-none"
                    onMouseMove={handleMouseMove}
                    onTouchStart={handleTouchStart}
                    tabIndex={0}
                >
                    <Hud score={score} speed={speed} />
                    
                    {gameStarted && <Spawner position={spawnerPosition} />}
                    {gameStarted && drinks.map(drink => <Drink key={drink.id} drink={drink} />)}
                    {gameStarted && <Catcher position={catcherPosition} />}
                    
                    {!gameStarted && !gameOver && <InitialPrompt />}
                    {gameOver && <GameOverScreen score={score} onRestart={resetGame} />}
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>


